<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>AR Viewer</title>
    <script
      type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"
    ></script>
    <style>
      body {
        margin: 0;
        background: transparent;
        font-family: Arial;
        text-align: center;
      }
      model-viewer {
        width: 100%;
        height: 60vh;
      }

      @media (max-width: 600px) {
        model-viewer {
          height: 40vh;
        }
      }
      .buttons {
        margin: 10px;
      }
      button {
        padding: 10px 15px;
        margin: 5px;
        border-radius: 10px;
        border: none;
        background: #0077b6;
        color: white;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h2>Immersion â€“ Eau augmentÃ©e</h2>

    <model-viewer
      id="viewer"
      src="fish3.glb"
      ar
      ar-modes="scene-viewer quick-look webxr"
      camera-controls
      auto-rotate
      shadow-intensity="1"
      autoplay
    >
    </model-viewer>

    <div class="buttons">
      <button onclick="changeModel('fish3.glb')">ğŸŸ Poisson Rouge</button>
      <button onclick="changeModel('bluePowderTang.glb')">
        ğŸ  Poisson-Chirurgien Bleu
      </button>
      <button onclick="changeModel('ButterflyFish.glb')">
        ğŸ¦‹ Poisson-Papillon
      </button>
      <button onclick="changeModel('algues.glb')">ğŸŒ¿ Algue</button>
    </div>

    <script>
      const modelViewerElement = document.getElementById("viewer");
      const urlParams = new URLSearchParams(window.location.search);
      const modelFromUrl = urlParams.get("model");
      const buttonsContainer = document.querySelector(".buttons");
      const allButtons = buttonsContainer.querySelectorAll("button");

      // Fonction pour mettre Ã  jour le modÃ¨le et les boutons
      function updateModelAndButtons(modelName) {
        if (modelName) {
          modelViewerElement.setAttribute("src", modelName);
          // Cacher tous les boutons
          allButtons.forEach((button) => (button.style.display = "none"));
          // Afficher uniquement le bouton correspondant au modÃ¨le
          allButtons.forEach((button) => {
            if (button.onclick.toString().includes(`'${modelName}'`)) {
              button.style.display = "inline-block";
            }
          });
        }
      }

      // Si un modÃ¨le est passÃ© via l'URL, l'utiliser
      if (modelFromUrl) {
        updateModelAndButtons(modelFromUrl);
      } else {
        // Sinon, utiliser le modÃ¨le par dÃ©faut et afficher tous les boutons
        updateModelAndButtons(modelViewerElement.getAttribute("src")); // Utilise le src actuel comme modÃ¨le par dÃ©faut
        allButtons.forEach((button) => (button.style.display = "inline-block"));
      }

      // La fonction changeModel est toujours utile si on veut ajouter d'autres boutons plus tard
      function changeModel(model) {
        updateModelAndButtons(model);
      }
    </script>
  </body>
</html>
